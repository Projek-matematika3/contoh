<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ucapan Ulang Tahun</title>
  <!-- Font untuk tema cute -->
  <link
    href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&display=swap"
    rel="stylesheet"
  />
  <!-- Font modern untuk tema lakik (Poppins) -->
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap"
    rel="stylesheet"
  />
  <style>
    /* RESET DASAR */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: #fffaf0;
      font-family: "Gloria Hallelujah", cursive, sans-serif; /* default = cute */
    }

    /* ========== HEADER ========== */
    .header {
      padding: 20px;
      text-align: center;
    }
    .header h1 {
      font-size: 2.5em;
      text-shadow: 1px 1px #fff;
    }
    .header-cute {
      background: #ffe3e3;
      border-bottom: 4px dashed #ffaadd;
    }
    .header-cute h1 {
      color: #ff4081;
    }
    .header-jamet {
      background: #000;
      border-bottom: 4px dashed #ffd700;
    }
    .header-jamet h1 {
      color: #ffd700;
      text-shadow: 2px 2px #000;
      font-size: 3em;
    }
    .header-lakik {
      background: #000;
      border-bottom: 4px solid #ffd700;
    }
    .header-lakik h1 {
      color: #ffd700;
      font-family: "Poppins", sans-serif;
      text-shadow: 2px 2px 4px rgba(255, 215, 0, 0.7);
      font-size: 2.7em;
    }

    /* ========== CONTAINER ========== */
    .container {
      margin: 30px auto;
      padding: 20px 30px;
      text-align: center;
      position: relative;
      border-radius: 10px;
      max-width: 700px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    /* Tema CUTE */
    .theme-cute {
      background: #ffffff;
      border: 3px dashed #ffd700;
      font-family: "Gloria Hallelujah", cursive, sans-serif;
      max-width: 800px;
    }
    .theme-cute::before,
    .theme-cute::after {
      position: absolute;
      font-size: 2.5em;
    }
    .theme-cute::before {
      content: "â˜†";
      top: -20px;
      left: -20px;
      color: #ffaadd;
      transform: rotate(-15deg);
    }
    .theme-cute::after {
      content: "â™¡";
      bottom: -20px;
      right: -20px;
      color: #ffd700;
      transform: rotate(15deg);
    }

    /* Tema JAMET */
    .theme-jamet {
      background: linear-gradient(
        135deg,
        red 0%,
        orange 16%,
        yellow 33%,
        green 50%,
        blue 66%,
        purple 83%,
        red 100%
      );
      color: #fff;
      border: 5px dotted #000;
      font-family: "Comic Sans MS", cursive, sans-serif;
      text-shadow: 2px 2px #000;
      max-width: 900px;
    }
    .theme-jamet::before,
    .theme-jamet::after {
      position: absolute;
      font-size: 2em;
    }
    .theme-jamet::before {
      content: "âœŒðŸ˜ŽðŸ”¥";
      top: -25px;
      left: -10px;
      transform: rotate(-15deg);
    }
    .theme-jamet::after {
      content: "ðŸŽ‚ðŸŽ‰ðŸ’¥";
      bottom: -25px;
      right: -10px;
      transform: rotate(15deg);
    }

    /* Tema LAKIK */
    .theme-lakik {
      background: #000
        url("https://i.ibb.co/8mfsn2c/gold-sparkles.png")
        center/cover no-repeat;
      border: 3px solid #ffd700;
      color: #ffd700;
      font-family: "Poppins", sans-serif;
      text-shadow: 1px 1px 2px rgba(255, 215, 0, 0.8);
      max-width: 800px;
    }
    .theme-lakik::before,
    .theme-lakik::after {
      position: absolute;
      font-size: 2.5em;
      color: #ffd700;
      filter: drop-shadow(1px 1px 3px rgba(255, 215, 0, 0.8));
    }
    .theme-lakik::before {
      content: "â˜…";
      top: -25px;
      left: -25px;
    }
    .theme-lakik::after {
      content: "âœ¨";
      bottom: -25px;
      right: -25px;
    }

    /* ========== KONTEN UTAMA ========== */
    .greeting {
      margin: 20px 0;
      font-size: 1.4em;
      line-height: 1.6;
    }
    .note {
      margin-top: 30px;
      padding: 15px;
      border-radius: 8px;
      font-style: italic;
      font-size: 1.1em;
      white-space: pre-line;
    }
    .theme-cute .note {
      background: #fff0f5;
      border: 2px dashed #ffaadd;
      color: #6b6b6b;
    }
    .theme-jamet .note {
      background: rgba(255, 255, 255, 0.2);
      border: 2px dashed #fff;
      color: #fff;
      text-shadow: 1px 1px #000;
      font-size: 1.2em;
    }
    .theme-lakik .note {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid #ffd700;
      color: #ffd700;
      text-shadow: 1px 1px 2px rgba(255, 215, 0, 0.8);
    }

    /* Foto per tema */
    .photo {
      display: block;
      margin: 20px auto;
      max-width: 250px;
      border-radius: 8px;
    }
    .theme-cute .photo {
      border: 3px dashed #ffaadd;
    }
    .theme-jamet .photo {
      border: 6px double #fff; /* Bisa diganti dotted, double, dll. */
      box-shadow: 0 0 10px #000;
      transform: rotate(-2deg);
    }
    .theme-lakik .photo {
      border: 3px solid #ffd700;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    /* FOOTER */
    .footer {
      text-align: center;
      margin-top: 40px;
      font-size: 0.9em;
      color: #999;
    }
  </style>
</head>
<body>
  <!-- HEADER dengan ID agar mudah ditambahkan kelas -->
  <div id="header" class="header">
    <h1>WELCOME TO PARTY!</h1>
  </div>

  <div id="container" class="container">
    <!-- IMG untuk foto, disembunyikan jika tidak ada URL -->
    <img
      id="uploadedPhoto"
      class="photo"
      style="display: none"
      alt="Foto Ulang Tahun"
      onerror="this.style.display='none'; console.warn('Gambar gagal dimuat. Cek URL foto.');"
    />

    <div id="greeting" class="greeting"></div>
    <div id="note" class="note" style="display: none"></div>
  </div>

  <div class="footer">
    &copy; 2025 - Happy Birthday Themes
  </div>

  <script>
    // Ambil parameter query
    function getQueryParams() {
      const params = {};
      window.location.search
        .substring(1)
        .split("&")
        .forEach(function (pair) {
          const [key, value] = pair.split("=");
          if (key) {
            params[decodeURIComponent(key)] = decodeURIComponent(value || "");
          }
        });
      return params;
    }

    // Convert link Google Drive ke direct link
    function convertGoogleDriveLink(link) {
      if (link.includes("drive.google.com")) {
        // Contoh: https://drive.google.com/file/d/ABC123/view?usp=sharing
        const parts = link.split("/");
        const idIndex = parts.indexOf("d") + 1;
        if (idIndex > 0 && idIndex < parts.length) {
          const fileId = parts[idIndex];
          return "https://drive.google.com/uc?export=view&id=" + fileId;
        }
      }
      return link;
    }

    const params = getQueryParams();
    const name = params.name || "Teman";
    const age = params.age || "usia";
    const styleParam = params.style || "cute";
    const note = params.note || "";
    let photoUrl = params.photoUrl || ""; // URL foto

    // Buat pesan berdasarkan gaya
    let greetingMessage;
    switch (styleParam) {
      case "cute":
        greetingMessage = `Happy Birthday, ${name}! Semoga ulang tahun ke-${age} dipenuhi dengan keceriaan dan momen-momen manis!`;
        break;
      case "jamet":
        greetingMessage = `Bro, selamat ulang tahun yang ke-${age}! Keep shining, ${name}, tetap keren dan unik!`;
        break;
      case "lakik":
        greetingMessage = `Selamat Ulang Tahun, ${name}! Di usia ke-${age}, semoga semakin sukses dan terus berkarya!`;
        break;
      default:
        greetingMessage = `Selamat Ulang Tahun, ${name}! Semoga hari istimewa ini penuh kebahagiaan.`;
    }

    // Tampilkan greeting
    document.getElementById("greeting").textContent = greetingMessage;

    // Tampilkan note jika ada
    if (note.trim() !== "") {
      const noteDiv = document.getElementById("note");
      noteDiv.style.display = "block";
      noteDiv.textContent = `Pesan spesial: ${note}`;
    }

    // Tambahkan kelas tema
    const container = document.getElementById("container");
    const header = document.getElementById("header");
    if (styleParam === "cute") {
      container.classList.add("theme-cute");
      header.classList.add("header-cute");
    } else if (styleParam === "jamet") {
      container.classList.add("theme-jamet");
      header.classList.add("header-jamet");
    } else if (styleParam === "lakik") {
      container.classList.add("theme-lakik");
      header.classList.add("header-lakik");
      // Ubah latar body agar lebih gelap
      document.body.style.background = "#000";
    } else {
      container.classList.add("theme-cute");
      header.classList.add("header-cute");
    }

    // Jika ada photoUrl, cek validitas dan tampilkan
    if (photoUrl.startsWith("http")) {
      // Jika link Google Drive, konversi
      photoUrl = convertGoogleDriveLink(photoUrl);
      const uploadedPhoto = document.getElementById("uploadedPhoto");
      uploadedPhoto.src = photoUrl;
      uploadedPhoto.style.display = "block";
    }
  </script>
</body>
</html>
