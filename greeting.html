<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ucapan Ulang Tahun</title>
  <!-- Import Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <!-- Font untuk tema cute -->
  <link
    href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&display=swap"
    rel="stylesheet"
  />
  <!-- Font modern untuk tema lakik (Poppins) -->
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap"
    rel="stylesheet"
  />
  <style>
    /* RESET DASAR */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: #fffaf0;
      font-family: "Gloria Hallelujah", cursive, sans-serif; /* default = cute */
    }
    .header {
      padding: 20px;
      text-align: center;
    }
    .header h1 {
      font-size: 2.5em;
      text-shadow: 1px 1px #fff;
    }
    /* Header per tema */
    .header-cute {
      background: #ffe3e3;
      border-bottom: 4px dashed #ffaadd;
    }
    .header-cute h1 {
      color: #ff4081;
    }
    .header-jamet {
      background: #000;
      border-bottom: 4px dashed #ffd700;
    }
    .header-jamet h1 {
      color: #ffd700;
      text-shadow: 2px 2px #000;
      font-size: 3em;
    }
    .header-lakik {
      background: #000;
      border-bottom: 4px solid #ffd700;
    }
    .header-lakik h1 {
      color: #ffd700;
      font-family: "Poppins", sans-serif;
      text-shadow: 2px 2px 4px rgba(255,215,0,0.7);
      font-size: 2.7em;
    }
    .container {
      margin: 30px auto;
      padding: 20px 30px;
      text-align: center;
      position: relative;
      border-radius: 10px;
      max-width: 700px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    /* Theme Cute */
    .theme-cute {
      background: #ffffff;
      border: 3px dashed #ffd700;
      font-family: "Gloria Hallelujah", cursive, sans-serif;
      max-width: 800px;
    }
    /* Theme Jamet */
    .theme-jamet {
      background: linear-gradient(135deg, red 0%, orange 16%, yellow 33%, green 50%, blue 66%, purple 83%, red 100%);
      color: #fff;
      border: 5px dotted #000;
      font-family: "Comic Sans MS", cursive, sans-serif;
      text-shadow: 2px 2px #000;
      max-width: 900px;
    }
    /* Theme Lakik */
    .theme-lakik {
      background: #000 url("https://i.ibb.co/8mfsn2c/gold-sparkles.png") center/cover no-repeat;
      border: 3px solid #ffd700;
      color: #ffd700;
      font-family: "Poppins", sans-serif;
      text-shadow: 1px 1px 2px rgba(255,215,0,0.8);
      max-width: 800px;
    }
    .greeting {
      margin: 20px 0;
      font-size: 1.4em;
      line-height: 1.6;
    }
    .note {
      margin-top: 30px;
      padding: 15px;
      border-radius: 8px;
      font-style: italic;
      font-size: 1.1em;
      white-space: pre-line;
    }
    .theme-cute .note {
      background: #fff0f5;
      border: 2px dashed #ffaadd;
      color: #6b6b6b;
    }
    .theme-jamet .note {
      background: rgba(255,255,255,0.2);
      border: 2px dashed #fff;
      color: #fff;
      text-shadow: 1px 1px #000;
      font-size: 1.2em;
    }
    .theme-lakik .note {
      background: rgba(255,255,255,0.1);
      border: 2px solid #ffd700;
      color: #ffd700;
      text-shadow: 1px 1px 2px rgba(255,215,0,0.8);
    }
    /* Foto */
    .photo {
      display: block;
      margin: 20px auto;
      max-width: 250px;
      border-radius: 8px;
    }
    .theme-cute .photo {
      border: 3px dashed #ffaadd;
    }
    .theme-jamet .photo {
      border: 4px dotted #fff;
    }
    .theme-lakik .photo {
      border: 3px solid #ffd700;
      box-shadow: 0 0 10px rgba(255,215,0,0.5);
    }
    .footer {
      text-align: center;
      margin-top: 40px;
      font-size: 0.9em;
      color: #999;
    }
  </style>
</head>
<body>
  <div id="header" class="header">
    <h1>WELCOME TO PARTY!</h1>
  </div>

  <div id="container" class="container">
    <!-- Foto akan ditampilkan jika ada -->
    <img id="uploadedPhoto" class="photo" style="display: none" alt="Foto Ulang Tahun" />
    <div id="greeting" class="greeting"></div>
    <div id="note" class="note" style="display: none"></div>
  </div>

  <div class="footer">
    &copy; 2025 - Happy Birthday Themes
  </div>

  <script>
    // Fungsi untuk mengambil parameter query dari URL
    function getQueryParams() {
      const params = {};
      window.location.search
        .substring(1)
        .split("&")
        .forEach(function (pair) {
          const [key, value] = pair.split("=");
          if (key) {
            params[decodeURIComponent(key)] = decodeURIComponent(value || "");
          }
        });
      return params;
    }

    // Fungsi untuk mengonversi link Google Drive ke direct link
    function convertGoogleDriveLink(link) {
      if (link.includes("drive.google.com")) {
        // Contoh: https://drive.google.com/file/d/ABC123xyz456/view?usp=sharing
        const parts = link.split("/");
        const idIndex = parts.indexOf("d") + 1;
        if (idIndex > 0 && idIndex < parts.length) {
          const fileId = parts[idIndex];
          return "https://drive.google.com/uc?export=view&id=" + fileId;
        }
      }
      return link;
    }

    const params = getQueryParams();
    const name = params.name || "Teman";
    const age = params.age || "usia";
    const styleParam = params.style || "cute";
    const note = params.note || "";
    let photoUrl = params.photoUrl || "";

    let greetingMessage = "";
    switch (styleParam) {
      case "cute":
        greetingMessage = `Happy Birthday, ${name}! Semoga ulang tahun ke-${age} dipenuhi dengan keceriaan dan momen-momen manis!`;
        break;
      case "jamet":
        greetingMessage = `Bro, selamat ulang tahun yang ke-${age}! Keep shining, ${name}, tetap keren dan unik!`;
        break;
      case "lakik":
        greetingMessage = `Selamat Ulang Tahun, ${name}! Di usia ke-${age}, semoga semakin sukses dan terus berkarya!`;
        break;
      default:
        greetingMessage = `Selamat Ulang Tahun, ${name}! Semoga hari istimewa ini penuh kebahagiaan.`;
    }
    document.getElementById("greeting").textContent = greetingMessage;

    if (note.trim() !== "") {
      const noteDiv = document.getElementById("note");
      noteDiv.style.display = "block";
      noteDiv.textContent = `Pesan spesial: ${note}`;
    }

    const container = document.getElementById("container");
    const header = document.getElementById("header");
    if (styleParam === "cute") {
      container.classList.add("theme-cute");
      header.classList.add("header-cute");
    } else if (styleParam === "jamet") {
      container.classList.add("theme-jamet");
      header.classList.add("header-jamet");
    } else if (styleParam === "lakik") {
      container.classList.add("theme-lakik");
      header.classList.add("header-lakik");
      document.body.style.background = "#000";
    } else {
      container.classList.add("theme-cute");
      header.classList.add("header-cute");
    }

    // Jika ada photoUrl dan dimulai dengan "http", gunakan link tersebut
    if (photoUrl.startsWith("http")) {
      // Jika link mengandung "drive.google.com", konversi ke direct link
      photoUrl = convertGoogleDriveLink(photoUrl);
      const uploadedPhoto = document.getElementById("uploadedPhoto");
      uploadedPhoto.src = photoUrl;
      uploadedPhoto.style.display = "block";
    }
  </script>
</body>
</html>
